<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            box-sizing: border-box;
        }
        body{
            margin: 0;
            width: 100%;
            min-height: 100vh;
            background-color: #F06060;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }   
        .dashboard{
            width: 100%;
            display: flex;
            justify-content: space-evenly;
        }
        .dashboard>div{
            width: 100px;
            background-color: blanchedalmond;
            text-align: center;
        }
        .container{
            width: 500px;
            height: 500px;
            background-color: #ddd;
            border-radius: 10px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
        }
        .control{
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .box{
            border: 5px solid #ddd;
            border-radius: 10px;
        }
        .box.anwser{
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="score">åˆ†æ•¸:0åˆ†</div>
        <div class="timer">å‰©é¤˜20ç§’</div>
    </div>
    <div class="container">
        
    </div>
    <div class="control">
        <button class="stop">æš«åœè¨ˆæ™‚</button>
    </div>
    <script>
        const containerElement = document.querySelector('.container');
        const scoreElement = document.querySelector('.score')
        const timerElement = document.querySelector('.timer')
        const stopBtn = document.querySelector('.stop')

        let score = 0
        let time = 20
        let RunOrNot = true

       
        function createBox() {
            // å–®é‚Šå€‹æ•¸ï¼Œå…ˆç”¨äº‚æ•¸å»æ±ºå®šç”Ÿæˆçš„æ ¼å­æ•¸é‡ï¼Œç§»é€²functionè®“ä»–æ¯æ¬¡éƒ½æœƒæ›´æ›
            // let side = Math.floor(Math.random() * 3) + 2;

            // ä¾ç…§åˆ†æ•¸æ”¹è®Šæ–¹å¡Šæ•¸é‡ (1~5 => 2, 6~15 3, 16~25 4, 26~35 5)
            let side = 0
            if (score <= 5){
                side = 2
            }else if(score <= 15){
                side = 3
            }else if(score <= 25){
                side = 4
            }else if(score <= 35){
                side = 5
            }else{
                side = 6
            }

            let boxes = '';
            // 0 ~ ç¸½æ•¸-1 çš„éš¨æ©Ÿæ•¸
            let anwser = Math.floor(Math.random() * side ** 2);
            // ç‚ºäº†éš¨æ©Ÿç”Ÿæˆé¡è‰², äº‚æ•¸ç”¢ç”Ÿ RGB ä¸‰å€‹æ•¸å€¼(ç¯„åœ0~255)
            let colorR = Math.floor(Math.random() * 256);
            let colorG = Math.floor(Math.random() * 256);
            let colorB = Math.floor(Math.random() * 256);

            // æ”¹è®Šé›£åº¦ = æ”¹è®Šé€æ˜åº¦, å…ˆç”¨äº‚æ•¸å»ç”¢ç”Ÿ 0.4 ~ 0.8   
            // let opacity = (Math.floor(Math.random() * 5)+4) * 0.1;

            // æ”¹è®Šé›£åº¦ (å‰10é¡Œ 0.4, 11~20 0.6, 21~30  0.8)
            let opacity = 0
            if (score <= 10){
                opacity = 0.4
            }else if(score <= 20){
                opacity = 0.6
            }else{
                opacity = 0.8
            }

            for(let i = 0;i < side**2;i++){
                
                if(i == anwser){
                    boxes += `<div class="box anwser" style="opacity: ${opacity}; width: calc(100% / ${side}); height: calc(100% / ${side});background-color: rgb(${colorR}, ${colorG}, ${colorB});"></div>`;
                }else{
                    boxes += `<div class="box" style="width: calc(100% / ${side}); height: calc(100% / ${side}); background-color: rgb(${colorR}, ${colorG}, ${colorB});"></div>`;
                }
            }
            containerElement.innerHTML = boxes;
        }
        function anwserSetting() {
            //åšå®Œæ–¹å¡Šä¹‹å¾Œ, æˆ‘å€‘åœ¨æ­£ç¢ºç­”æ¡ˆçš„æ–¹å¡Šä¸Šç¶å®šé‡è¨­çš„äº‹ä»¶
            const anwserElement = document.querySelector('.box.anwser');
            anwserElement.addEventListener('click',function () {
                // ç•¶ä½¿ç”¨è€…é»åˆ°æ­£ç¢ºçš„æ–¹å¡Š.....
                score += 1  // score = score + 1
                scoreElement.innerHTML = `åˆ†æ•¸:${score}åˆ†`

                // çµ¦ä¸‹ä¸€é¡Œ
                resetContainer();
            });
        }
        function resetContainer() {
            createBox();
            anwserSetting();
        }
        
        resetContainer();


        // 1. è®Šæ›é¡è‰² æˆåŠŸ
        // 2. è®Šæ›æ•¸é‡ æˆåŠŸ
        // 3. é›£åº¦(é€æ˜åº¦) æˆåŠŸ
        // 4. è¨ˆåˆ† æˆåŠŸ
        // 5. è¨ˆæ™‚ æˆåŠŸ
        // 5-1. åœæ­¢ æˆåŠŸ
        // 6. æš«åœ æˆåŠŸ
        // 6-1. å†é–‹å§‹ æˆåŠŸ
        // 7. çµæŸéŠæˆ²


        // å°è¦æ¨¡æ¸¬è©¦ settimeoutæ˜¯å¦çœŸçš„æœ‰ç”¨ğŸ¤”
        // çµæœ ä»–æ˜¯å»¶é²åŸ·è¡Œç”¨çš„, ä¸æœƒé‡è¤‡
        // setTimeout('æˆ‘è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼', å¤šå°‘æ¯«ç§’å¾Œ åŸ·è¡Œä¸€æ¬¡)
        // var a = setTimeout('console.log("hahaha")',1000)

        // å°è¦æ¨¡æ¸¬è©¦  setInterval æ˜¯å¦å°±æœƒé‡è¤‡äº†å‘¢
        // çµæœ ä»–å¯ä»¥é‡è¤‡åŸ·è¡Œéœ€è¦çš„ç¨‹å¼
        // setInterval('æˆ‘è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼', æ¯å¤šå°‘æ¯«ç§’å¾Œé‡è¤‡åŸ·è¡Œ)
        // setInterval('console.log("ä¸€ç§’ç¶“é")',1000)  ä»–å¯ä»¥ç”¨å­—ä¸²å¯«å…¥æŒ‡ä»¤
        // setInterval(try_count,1000)  ä»–å¯ä»¥å‘¼å«å‡½å¼ (ä¸éœ€è¦æ‹¬å¼§)
     
        // setIntervalä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨åŒ¿åå‡½å¼
        
        var countdown = setInterval(function(){
            time = time - 0.1
            timerElement.innerHTML = `å‰©é¤˜:${time.toFixed(1)}ç§’`
            //æ‰£å®Œæ™‚é–“å¾Œ, ç¢ºèªæ˜¯å¦æ™‚é–“åˆ°äº†
            if (time <= 0){
                //æ™‚é–“åˆ°äº†, åœæ­¢è¨ˆæ™‚å™¨ clearInterval(è¦åœæ­¢çš„è¨ˆæ™‚å™¨)
                clearInterval(countdown)
            }
        },100)

        stopBtn.addEventListener('click',function () {
            // è—‰ç”±RunOrNotä¾†åˆ¤æ–·æ˜¯å¦æ­£åœ¨åŸ·è¡Œ
            if (RunOrNot){
                clearInterval(countdown)
                //å€’æ•¸çš„åŸ·è¡Œç‹€æ…‹æ”¹ç‚ºfalse
                RunOrNot = false
            }else{
                countdown = setInterval(function(){
                    time = time - 0.1
                    timerElement.innerHTML = `å‰©é¤˜:${time.toFixed(1)}ç§’`
                    //æ‰£å®Œæ™‚é–“å¾Œ, ç¢ºèªæ˜¯å¦æ™‚é–“åˆ°äº†
                    if (time <= 0){
                        //æ™‚é–“åˆ°äº†, åœæ­¢è¨ˆæ™‚å™¨ clearInterval(è¦åœæ­¢çš„è¨ˆæ™‚å™¨)
                        clearInterval(countdown)
                    }
                },100)
                //å€’æ•¸çš„åŸ·è¡Œç‹€æ…‹æ”¹ç‚ºtrue
                RunOrNot = true
            }
            
        });
        
        



    </script>
</body>
</html>